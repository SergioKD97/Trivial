<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="js/jquery.raty.css" rel="stylesheet" type="text/css"/>
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        
        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/jquery.raty.js" type="text/javascript"></script>        
        <script src="js/preguntasSelectividad.js" type="text/javascript"></script>
        
        
        <style>
            #atras{position: fixed;width: 16%;height: 53%;}
            #logo{width: 100%;height: 50% ;background-image: url("images/logo.png");;background-size: contain;background-repeat: no-repeat;}
            #flecha{width: 100%;height: 24% ;background-image: url("images/flecha.png");;background-size: contain;background-repeat: no-repeat;float: left  }
            #cabecera{}
            .black{background-color: black;height: 2px;width: 100%;margin-top: 5px;margin-bottom: 5px}
            .divDerecha{padding-left: 0px; }
            .miniboton{width: 60px;min-width: 60px;height: 60px;min-height: 60px;}
            #niveles{ }
            #name{margin-bottom: 10px}
            #progreso{margin-top: 10px}
            #corazones{float: right;}
            #puntuacion{float: left;font-size: 30px;font-family: serif;padding: 10px 16px;border-radius: 15px;color: darkblue;background-image: linear-gradient(#ded, #ccd);}
            #medio{float: left;font-size: 30px;margin-left: 6%;animation: BackgroundGradient 3s infinite alternate; font-family: monospace;}
            .cambioColor{text-align: left}
            .cambioColor:hover {color:blue;}
            #respuesta{background-color: }
            #preguntasDiv{background-color: antiquewhite;margin-top: 200px}
            #r1,#r2,#r3,#r4{text-align:left; margin-left: 10px}
            #enunciado{border-color: teal;text-align: left}
            #numero{float: left;margin-right: -10px;clear: both}
            #separa{
                display:block;
                border-top:2px solid #000;
                width:50%;
                float: left;
                margin-top: 6px;
                margin-bottom: 15px;
                border-color:#b23836;
                -webkit-animation: thread2 12s infinite;
                -moz-animation:    thread2 12s infinite;
                -o-animation:      thread2 12s infinite;
                animation:         thread2 12s infinite;	
            }
            @-webkit-keyframes thread2 {0%   { width: 100%; }50% { width: 100%; }80% { width: 0px;}100%{ width:100%;}}
            
            
            
            #preguntas{margin-top: 30px;margin-bottom: 20px }
            body {
            animation: BackgroundGradient 30s infinite alternate;
            }    
            @keyframes BackgroundGradient{
                0% {background-color : #feffcd;}
                20% {background-color : #fae5d3;}
                40% {background-color : #edbb99;}
                60% {background-color : #d4e6f1;}
                80% {background-color : #d4efdf;}
                100% {background-color : #d98880;}
            }

            
            

</style>
 
    </head>
    <body>
        <!--<script>alert("BIENVENIDO")</script> -->                  
        <div id="atras" onclick="clickLogo()" >
            <div id="logo" > </div>
            <div id="flecha" > </div>
        </div>
        
        <div class="container">
            <div id="cabecera" style="width: 50%"><div class="text-center" style="font-size: 4.5vw"> <i class="fa fa-book" ></i> TEMAS <i class="fa fa-book" ></i></div>
            <div style="width: 97%;margin-bottom: 23px;"><div id="separa" class=""></div></div></div>
            
            <div id="tema1" class="row">
                <div class="col-xs-6" > 

                    <div id="Historia" class="btn btn-primary btn-lg btn-block" name="Historia" onclick="Niveles(this.id)">HISTORIA</div>
                    <div id="Economia" class="btn btn-success btn-lg btn-block" name="Economia" onclick="Niveles(this.id)">ECONOMIA</div>
                    <div id="Filosofia" class="btn btn-danger btn-lg btn-block" name="Filosofia" onclick="Niveles(this.id)">FILOSOFIA</div>
                    <div id="Lengua" class="btn btn-warning btn-lg btn-block" name="Lengua" onclick="Niveles(this.id)">LENGUA Y LITERATURA</div>
                    <div id="Ingles" class="btn btn-info btn-lg btn-block" name="Ingles" onclick="Niveles(this.id)">INGLES</div>

                    <br>
                </div>


                <div id="derecha" class="divDerecha">
                    <div id="name" class="btn btn-primary btn-lg">NIVELES</div>
                    <div id="niveles" > </div>

                </div>
                <div>

                </div>
            </div>
                
            <div class="col-xs-2 col-lg-0 col-md-2"></div>
            <div id="preguntasDiv"  class="row col-xs-10 col-lg-12 col-md-10">

                <div class="col-xs-12" id="progreso">
                    
                    <div id="puntuacion" class="" onclick="Niveles()">PUNTUACION : 0</div>
                    <div id="medio" class="btn btn-default btn-lg"> NIVEL DESBLOQUEADO <i class="fa fa-angellist" style="float: left"></i><i class="fa fa-thumbs-up" style="float: left;margin-right: 10px"></i><i class="fa fa-thumbs-up"></i><i class="fa fa-angellist"></i></div>
                    <div id="corazones" class="btn btn-success btn-lg " onclick="Niveles()"></div>
                    
                    
                    
                </div>


                <div class="col-xs-12" id="preguntas">

                    
                    
                </div>

            </div>



        </div>
        
        </div>
        
    <script>
    $('#derecha').hide();
    $('#niveles').hide();
    $('#name').hide();
    $('#preguntasDiv').hide();
    $('#atras').hide();
    
    
    var aumenta = 0;
    //almaceno el tema que se ha clicado
    var paco = "";
    //almaceno el array con las preguntas sobre el tema que se ha clicado
    var preguntasBuena = [];
    //variable para desbloquear niveles
    var desbloqueaNivelesHistoria = 0;
    var desbloqueaNivelesEconomia = 0;
    var desbloqueaNivelesFilosofia = 0;
    var desbloqueaNivelesLengua = 0;
    var desbloqueaNivelesIngles = 0;
    
    var puntuación = 0;
    
    
    //aparecen los niveles 
    function niveles(){
        //resetea las estrellas al volver a entrar en las preguntas
        $('#niveles').text('');
        
        //para resetear las estrellas si cambio de nivel
        aumenta = 0;
        
        
        //pone todos los botones de niveles 
        for (var i=1; i<10; i++){
        $('#niveles').append('<div class="miniboton btn-group" style="margin-right: 5px;margin-top:5px"> <button id="'+paco+i+'" style="font-size:25px" class="miniboton btn btn-large btn-primary" onclick="clickNiveles()"> '+i+'</button></div>');
            
            if("Historia" === paco){
               $('#'+paco+''+i+'').addClass("miniboton btn btn-large btn-primary");
            }else if ("Economia" === paco) {
               $('#'+paco+''+i+'').addClass("miniboton btn btn-large btn-success");
            }else if ("Filosofia" === paco) {
               $('#'+paco+''+i+'').addClass("miniboton btn btn-large btn-danger");
            }else if ("Lengua" === paco) {
               $('#'+paco+''+i+'').addClass("miniboton btn btn-large btn-warning");
            }else if ("Ingles" === paco) {
               $('#'+paco+''+i+'').addClass("miniboton btn btn-large btn-info");
            }            
            
            
            if (i==3 || i==6) {
              $('#niveles').append('<br>');
            }
            //pone candados del nivel 4 al 9
            if(i>3){
                $('#'+paco+''+i+'').removeClass().addClass("miniboton btn btn-large fa fa-lock disabled").text("").removeAttr('onclick') ;
            }
        }
        
//los 5 if siguientes desbloquean los niveles correspondientes a el tema elegido

        //si se aciertan 5 preguntas del tema historia se desbloquea el nivel siguiente del tema historia
        if(desbloqueaNivelesHistoria > 0){
            var suma = 3+1;

            for (var i=0; i<desbloqueaNivelesHistoria; i++){
            $('#'+'Historia'+''+suma+'').removeClass("miniboton btn btn-large fa fa-lock disabled").addClass("miniboton btn btn-large btn-primary").text(suma).attr('onclick','clickNiveles()') ;                
            suma++;
            }
        }
        
        //si se aciertan 5 preguntas del tema Economia se desbloquea el nivel siguiente del tema Economia
        if(desbloqueaNivelesEconomia > 0){
            var suma = 3+1;

            for (var i=0; i<desbloqueaNivelesEconomia; i++){
            $('#'+'Economia'+''+suma+'').removeClass("miniboton btn btn-large fa fa-lock disabled").addClass("miniboton btn btn-large btn-success").text(suma).attr('onclick','clickNiveles()') ;                
            suma++;
            }

        }
        
        //si se aciertan 5 preguntas del tema Filosofia se desbloquea el nivel siguiente del tema Filosofia
        if(desbloqueaNivelesFilosofia > 0){
            var suma = 3+1;

            for (var i=0; i<desbloqueaNivelesFilosofia; i++){
            $('#'+'Filosofia'+''+suma+'').removeClass("miniboton btn btn-large fa fa-lock disabled").addClass("miniboton btn btn-large btn-danger").text(suma).attr('onclick','clickNiveles()') ;                
            suma++;
            }

        }
        
        //si se aciertan 5 preguntas del tema Lengua se desbloquea el nivel siguiente del tema Lengua
        if(desbloqueaNivelesLengua > 0){
            var suma = 3+1;

            for (var i=0; i<desbloqueaNivelesLengua; i++){
            $('#'+'Lengua'+''+suma+'').removeClass("miniboton btn btn-large fa fa-lock disabled").addClass("miniboton btn btn-large btn-warning").text(suma).attr('onclick','clickNiveles()') ;                
            suma++;
            }

        }
        //si se aciertan 5 preguntas del tema Ingles se desbloquea el nivel siguiente del tema Ingles
        if(desbloqueaNivelesIngles > 0){
            var suma = 3+1;

            for (var i=0; i<desbloqueaNivelesIngles; i++){
            $('#'+'Ingles'+''+suma+'').removeClass("miniboton btn btn-large fa fa-lock disabled").addClass("miniboton btn btn-large btn-info").text(suma).attr('onclick','clickNiveles()') ;                
            suma++;
            }

        }
        
        
        
    }  

    
    
    //cambia las preguntas y respuestas cada vez que se ejecute
    function cambiaPreguntas() {
        var sube = 0;
        
        //for para meter en un array las preguntas que tengan que ver con el tema seleccionado
        for (var i=1; i<preguntas.length; i++){
            if(preguntas[i][2] === paco){
                
                preguntasBuena[sube] = preguntas[i];
                sube = sube+1;
                
            }    
        }
        

        siguiente = Math.floor(Math.random() * preguntasBuena.length);
        $('#preguntas').text('');
        
        //añade texto y atributos a la pregunta y respuestas
        //$('#enunciado').text(preguntas[siguiente][3]).addClass("btn btn-lg btn-block");
        //$('#botones').append('<button id="boton1" class="btn btn-warning" style="width:25%;">' + verbos[siguiente][0] + ' </button> ');
        $('#preguntas').append('<div id="enunciado" class="btn btn-lg btn-block" style="width:100%;">' + preguntasBuena[siguiente][3] + '</div>');
        $('#preguntas').append('<div id="numero" class="col-xs-1 btn btn-lg">1.</div>').append('<div id="r1" class="btn btn-lg btn-block" onclick="comprueba(this.id)">' + preguntasBuena[siguiente][4] + '</div>');
        $('#preguntas').append('<div id="numero" class="col-xs-1 btn btn-lg">2.</div>').append('<div id="r2" class="btn btn-lg btn-block" onclick="comprueba(this.id)">' + preguntasBuena[siguiente][5] + '</div>');
        $('#preguntas').append('<div id="numero" class="col-xs-1 btn btn-lg">3.</div>').append('<div id="r3" class="btn btn-lg btn-block" onclick="comprueba(this.id)">' + preguntasBuena[siguiente][6] + '</div>');
        $('#preguntas').append('<div id="numero" class="col-xs-1 btn btn-lg">4.</div>').append('<div id="r4" class="btn btn-lg btn-block" onclick="comprueba(this.id)">' + preguntasBuena[siguiente][7] + '</div>');

    }
    
    
    //al hacer click mostrara si es correcta o incorrecta
    function comprueba(e) {        
        var respuestaElegida = document.getElementById(e).innerHTML;      
        console.log(respuestaElegida);
        var numeroRespuestaCorrecta = parseInt(preguntasBuena[siguiente][8]);
        var respuestaCorrecta = preguntasBuena[siguiente][numeroRespuestaCorrecta + 3];
        parseFloat(e);
        
        //si es correcta la respuesta, cambia a la siguiente
        if(respuestaElegida === respuestaCorrecta ){
            //pone estrella cada vez que acertemos
            aumenta = aumenta + 1;
            
            
            
            $('#corazones').raty({
            readOnly    : true,
            halfShow    : false,
            score       : aumenta,
            number      : 5,
            starType    : 'i'
            });
            //muestra div y suma 50 de puntuacion
            if(aumenta === 5){
               $('#medio').attr('onclick','nivelDesbloqueado()').show();
               puntuación = puntuación + 40;
            }
            //si acertamos una suma 10 puntos
            puntuación = puntuación + 10;
            $('#puntuacion').text("PUNTUACION : "+puntuación);
            
            
            
            //cada vez que acertamos 5 preguntas de cada tema se van a ir desbloqueando niveles de cada tema
            if( aumenta === 5 && paco === "Historia" ){
                desbloqueaNivelesHistoria++;
                
            }
            if( aumenta === 5 && paco === "Economia" ){
                desbloqueaNivelesEconomia++;
            }
            
            if( aumenta === 5 && paco === "Filosofia" ){
                desbloqueaNivelesFilosofia++;
            }            
            if( aumenta === 5 && paco === "Lengua" ){
                desbloqueaNivelesLengua++;
            }            
            if( aumenta === 5 && paco === "Ingles" ){
                desbloqueaNivelesIngles++;
            }     
            
            
            
            
            
            
            
            $('#r1,#r2,#r3,#r4').removeAttr('onclick');
            $('#'+ e+'').fadeOut(0).fadeIn(2000).addClass("btn-success");
            setTimeout(cambiaPreguntas,2500);
            
        }else{
            puntuación = puntuación - 10;
            
            //pone en rojo las incorrectas
            $('#'+ e+'').addClass("btn-danger active");
            aumenta = 0;
            $('#corazones').raty({
            readOnly    : true,
            halfShow    : false,
            score       : 0,
            number      : 5,
            starType    : 'i'
            });

        }
}
    
    
    
    
    
    //muestra nivel desbloqueado
    function nivelDesbloqueado(){
        setTimeout(clickLogo(),3000);
        setTimeout(Niveles(paco),3500);
        
    }
    
    
    //muestra niveles
    function Niveles(m) {
        parseFloat(m);
        //paco es la variable donde guardo el nombre del tema seleccionado
        paco = m;
        
        niveles();
        
        
        $('#derecha').show();
        $('#name').fadeIn(1000).show();
        $('#niveles').fadeIn(1000).hide().fadeIn(1000).show();
             
    }
    
    
    //muestra las preguntas y respuestas
    function clickNiveles() {
        
        
        $('#tema1').hide();
        $('#cabecera').hide();
        $('#tema1').hide();
        $('#preguntasDiv').fadeIn(1000).show();
        $('#atras').fadeIn(1000).show();
        $('#medio').hide();
        
        
        $('#corazones').raty({
            readOnly    : true,
            halfShow    : false,
            //score       : contadorEstrellas, 
            //number      : contadorEstrellas,
            starType    : 'i'
        });
        
        cambiaPreguntas();
        
    }
    
    //vuelve a los temas
    function clickLogo() {
        $('#tema1').show();
        $('#cabecera').show();
        $('#derecha').fadeIn(1000).hide();
        $('#preguntasDiv').fadeIn(1000).hide();
        $('#atras').fadeIn(1000).hide();}
    
             
                 
            
            
            
        </script>
            
    </body>
</html>
